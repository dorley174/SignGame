name: Check Project Structure

on:
  push:
    branches:
      - DevOps
  pull_request:
    branches:
      - DevOps

jobs:
  validate-structure:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Check for 'Assets' folder
        run: |
          if [ -d "Assets" ]; then
            echo "‚úÖ 'Assets' folder found"
          else
            echo "‚ùå 'Assets' folder is missing"
            exit 1
          fi

      - name: Check for 'Assets/Scenes' folder
        run: |
          if [ -d "Assets/Scenes" ]; then
            echo "‚úÖ 'Assets/Scenes' folder found"
          else
            echo "‚ùå 'Assets/Scenes' folder is missing"
            exit 1
          fi

      - name: Check for 'MainMenuScene.unity' file
        run: |
          if [ -f "Assets/Scenes/MainMenuScene.unity" ]; then
            echo "‚úÖ 'MainMenuScene.unity' found"
          else
            echo "‚ùå Start menu 'MainMenuScene.unity' is missing!"
            exit 1
          fi

      - name: Search for level files matching pattern
        run: |
          echo "üîç Searching for level files..."
          matches=$(find Assets/Scenes -type f -regextype posix-extended -regex ".*/Level[A-Z][a-zA-Z]{0,9}[0-9]{3}\.unity")
          if [ -n "$matches" ]; then
            echo "‚úÖ Found level files:"
            echo "$matches"
          else
            echo "‚ö†Ô∏è No matching level files found"
          fi
